<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Cinister by souravdatta</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Cinister</h1>
          <h2>A tiny CoffeeScript web framework</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/souravdatta/cinister/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/souravdatta/cinister/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/souravdatta/cinister" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <p>Cinister is a tiny evolving web framework  (under MIT license) in CoffeeScript and Node.js heavily inspired 
by Ruby's excellent Sinatra framework. I'm mainly writing this to learn both CoffeeScript, JavaScript and Node.js at the same time. </p>

<h1>Huh? </h1>

<hr><p>The main goal is to keep things simple, currently it supports RESTful URL patterns for tiny apps and GET, POST, PUT and DELETE http methods. 
But overtime it will provide more Jelly and Tomatoes for the stars! So how does it work? </p>

<ul>
<li>You gonna need <a href="http://nodejs.org/">Node.js</a> installed for this.</li>
<li>Also, since its a <a href="http://coffeescript.org/">CoffeeScript</a> (sip) project you need to install that as well.</li>
</ul><p><strong>Getting Cinister</strong></p>

<p>You can download the source code from the above links or more simply can run this from npm</p>

<p><code>npm install cinister</code></p>

<p>Cinister depends on <code>querystring</code> module to parse POST/PUT/DELETE request body part, so make sure you have installed that as well.</p>

<p><strong>Creating an app</strong></p>

<p>We are going to make a simple app that says 'Hi' on launch and runs on localhost at port 9000.</p>

<p><code>cin = require 'cinister'</code></p>

<p>This gets Cin classes and functions ready for your app.</p>

<p><code>cin.port 9000</code></p>

<p>This sets the port of our app server to 9000.</p>

<p><code>cin.get '/', -&gt; '&lt;h1&gt;Hi&lt;/h1&gt;'</code></p>

<p>This creates a route for our app. The route is root or '/' and on hitting it the page will greet you with Hi.</p>

<p><code>cin.start()</code></p>

<p>And finally this starts the app. </p>

<p>Put the above lines in a file, say app1.coffee, and run </p>

<p><em><strong>coffee app1.coffee</strong></em></p>

<p>Now navigate to http://localhost:9000/ to see your message. </p>

<p>Cinister is written in CoffeeScript but that doesn't mean it can't run with plain vanilla JavaScript. Cinister can be used along with just Node.js in the same way as above. Here's a much contrived example in JavaScript -</p>

<p><a href="https://gist.github.com/souravdatta/5538500">Cinister in JavaScript</a></p>

<p><strong>RESTful URLS</strong></p>

<p>Cinister supports various REST like patterns of URLs and methods. Here are some examples:</p>

<pre><code>cin.get 'users/:name', (params) -&gt; console.log params
</code></pre>

<p>The <code>params</code> parameter will contain all the <code>:argument</code>s as key/value pairs. The key will be <code>argument</code> and value will the be the corresponding part in the URL. So if a GET request has URL <code>users/John</code>, <code>params.name</code> will be <code>'John'</code>.</p>

<pre><code>cin.get 'users/:name/len*', (params) -&gt; "#{params['name']} and #{params.splat[0]}"
cin.get 'users/:name/*/*', (params) -&gt; console.log params
cin.get 'users/:name/*/and/*', (params) -&gt; console.log params
</code></pre>

<p>A star indicates one or more characters and the matched URL parts are kept as an array in <code>params['splat']</code>.</p>

<pre><code>cin.put 'users', (params) -&gt; console.log 'PUT ', params
cin.delete 'foods', (params) -&gt; console.log 'DEL ', params
cin.post 'apaches', (params) -&gt; console.log 'POST', params
</code></pre>

<p>The <code>params</code> argument receives a nested Object called <code>query</code> which stores the parsed body part of the HTTP request. For GET reuests this is taken from the URL itself and for other requests the body of the request is parsed using Node.js querystring module. Below is another example of how * can be used to match file patterns</p>

<pre><code>cin.get 'users/reports/*.*', (params) -&gt;
    report_name = params.splat[0]
    if report_name.match(/\.html$/)
        '&lt;div&gt;report&lt;/div&gt;'
    else if report_name.match(/\.json$/)
        JSON.stringify {report: 'Blah'}
    else
        'report = blah'
</code></pre>

<p>View the associated cintest*.coffee files for usage examples in CoffeeScript.</p>

<p>Fun!</p>
        </section>

        <footer>
          Cinister is maintained by <a href="https://github.com/souravdatta">souravdatta</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>